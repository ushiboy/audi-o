(this["webpackJsonpaudi-o"]=this["webpackJsonpaudi-o"]||[]).push([[0],{93:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(10),i=n.n(a),o=n(22),l=n.n(o),s=n(36),u=n(58),d=n(59),j=function(){function e(){Object(u.a)(this,e),this.chunks=void 0,this.mediaRecorder=void 0,this.analyser=void 0,this.chunks=[],this.mediaRecorder=null,this.analyser=null}return Object(d.a)(e,[{key:"start",value:function(){var e=this;return this.chunks=[],navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){var n=new AudioContext,r=n.createMediaStreamSource(t);e.analyser=n.createAnalyser(),e.analyser.fftSize=2048,r.connect(e.analyser),e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.ondataavailable=function(t){e.chunks.push(t.data)},e.mediaRecorder.start()}))}},{key:"stop",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(null==t.mediaRecorder)throw new Error("Recorder does not started");t.mediaRecorder.onstop=function(){try{var r=new Blob(t.chunks,{type:"audio/ogg; codecs=opus"});e(r)}catch(c){n(c)}},t.mediaRecorder.stop()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){if(null==this.analyser)throw new Error("Recorder does not started");var e=this.analyser.frequencyBinCount,t=new Uint8Array(e);return this.analyser.getByteTimeDomainData(t),t}},{key:"getBufferSize",value:function(){if(null==this.analyser)throw new Error("Recorder does not started");return this.analyser.frequencyBinCount}}]),e}(),f=n(21),h=n(130),b=n(135),O=n(121),x=n(122),v=n(123),m=n(131),y=n(124),p=n(125),k=n(29),C=n.n(k),w=n(64),g=n.n(w),R=n(5),S=function(e){var t=e.onCreatedFile,n=e.onCancelCreate,c=Object(r.useState)(""),a=Object(f.a)(c,2),i=a[0],o=a[1];return Object(R.jsxs)(b.a,{open:!0,children:[Object(R.jsx)(O.a,{children:"Create Audio"}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)(v.a,{children:"Enter the title of the audio data."}),Object(R.jsx)(m.a,{autoFocus:!0,label:"Title",type:"text",fullWidth:!0,value:i,onChange:function(e){o(e.target.value)}})]}),Object(R.jsxs)(y.a,{children:[Object(R.jsx)(p.a,{onClick:n,color:"primary",startIcon:Object(R.jsx)(C.a,{}),children:"DROP"}),Object(R.jsx)(p.a,{disabled:0===i.length,startIcon:Object(R.jsx)(g.a,{}),onClick:function(){t(i)},color:"primary",children:"SAVE"})]})]})},D=function(e){var t=e.record,n=e.onDeleteFile,r=e.onCancelDelete;return Object(R.jsxs)(b.a,{open:!0,children:[Object(R.jsx)(O.a,{children:"Delete Audio"}),Object(R.jsx)(x.a,{children:Object(R.jsx)(v.a,{children:"Do you want to delete the file?"})}),Object(R.jsxs)(y.a,{children:[Object(R.jsx)(p.a,{onClick:r,color:"primary",children:"CANCEL"}),Object(R.jsx)(p.a,{startIcon:Object(R.jsx)(C.a,{}),onClick:function(){n(t)},color:"primary",children:"DELETE"})]})]})},A=n(126),E=n(127),F=n(69),T=n(128),B=n(129),I=n(65),P=n.n(I),L=function(e){var t=e.record,n=e.onDeleteClick,r=t.title,c=t.url;return Object(R.jsxs)(A.a,{children:[Object(R.jsx)(E.a,{children:Object(R.jsx)(F.a,{children:r})}),Object(R.jsxs)(T.a,{children:[Object(R.jsx)("audio",{src:c,controls:!0}),Object(R.jsx)(B.a,{"aria-label":"download",onClick:function(){var e=document.createElement("a");e.download="".concat(r,".ogg"),e.href=c,e.click()},children:Object(R.jsx)(P.a,{})}),Object(R.jsx)(B.a,{"aria-label":"delete",onClick:function(){n(t)},children:Object(R.jsx)(C.a,{})})]})]})},U=n(133),W=n(66),q=n.n(W),z=n(67),M=n.n(z),J=c.a.createContext(new j),N=function(e){var t=e.onRecordedAudio,n=Object(r.useContext)(J),c=Object(r.useRef)(null),a=Object(r.useRef)(0),i=Object(r.useState)(!1),o=Object(f.a)(i,2),u=o[0],d=o[1],j=function e(){a.current=requestAnimationFrame(e),G(c.current,n)};return Object(r.useEffect)((function(){return V(c.current),function(){cancelAnimationFrame(a.current)}}),[]),Object(R.jsxs)(U.a,{children:[Object(R.jsx)("canvas",{ref:c,style:{height:120,width:640}}),Object(R.jsx)(p.a,{variant:"contained",color:"secondary",disabled:u,startIcon:Object(R.jsx)(q.a,{}),onClick:Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,n.start();case 3:j();case 4:case"end":return e.stop()}}),e)}))),children:"Record"}),Object(R.jsx)(p.a,{variant:"contained",color:"primary",disabled:!u,startIcon:Object(R.jsx)(M.a,{}),onClick:Object(s.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stop();case 2:r=e.sent,d(!1),cancelAnimationFrame(a.current),V(c.current),void 0!==r&&t(r);case 7:case"end":return e.stop()}}),e)}))),children:"Stop"})]})},V=function(e){if(null!=e){var t=e.width,n=e.height,r=e.getContext("2d");null!=r&&(r.fillStyle="#e0f7fa",r.fillRect(0,0,t,n),r.lineWidth=1,r.strokeStyle="#4caf50",r.beginPath(),r.moveTo(0,n/2),r.lineTo(t,n/2),r.stroke())}},G=function(e,t){if(null!=e){var n=e.width,r=e.height,c=e.getContext("2d");if(null!=c){c.fillStyle="#e0f7fa",c.fillRect(0,0,n,r),c.lineWidth=1,c.strokeStyle="#4caf50",c.beginPath();for(var a=t.getBufferSize(),i=1*n/a,o=t.getData(),l=0,s=0;s<a;s++){var u=o[s]/128*r/2;0===s?c.moveTo(l,u):c.lineTo(l,u),l+=i}c.lineTo(n,r/2),c.stroke()}}},H=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(f.a)(a,2),o=i[0],l=i[1],s=Object(r.useState)(null),u=Object(f.a)(s,2),d=u[0],j=u[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(h.a,{maxWidth:"sm",children:[Object(R.jsx)(N,{onRecordedAudio:function(e){var t=URL.createObjectURL(e);l({title:"",url:t})}}),n.map((function(e,t){return Object(R.jsx)(L,{record:e,onDeleteClick:function(e){j(e)}},t)}))]}),null!==o?Object(R.jsx)(S,{onCreatedFile:function(e){c((function(t){return t.concat([{title:e,url:o.url}])})),l(null)},onCancelCreate:function(){l(null)}}):null,null!==d?Object(R.jsx)(D,{record:d,onDeleteFile:function(e){c((function(t){return t.filter((function(t){var n=t.title,r=t.url;return!(n===e.title&&r===e.url)}))})),j(null)},onCancelDelete:function(){j(null)}}):null]})};i.a.render(Object(R.jsx)(J.Provider,{value:new j,children:Object(R.jsx)(H,{})}),document.getElementById("root"))}},[[93,1,2]]]);