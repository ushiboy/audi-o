(this["webpackJsonpaudi-o"]=this["webpackJsonpaudi-o"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(11),i=n.n(a),o=n(25),l=n.n(o),s=n(39),u=n(61),d=n(62),j=function(){function e(){Object(u.a)(this,e),this.chunks=void 0,this.mediaRecorder=void 0,this.analyser=void 0,this.chunks=[],this.mediaRecorder=null,this.analyser=null}return Object(d.a)(e,[{key:"start",value:function(){var e=this;return this.chunks=[],navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){var n=new AudioContext,r=n.createMediaStreamSource(t);e.analyser=n.createAnalyser(),e.analyser.fftSize=2048,r.connect(e.analyser),e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.ondataavailable=function(t){e.chunks.push(t.data)},e.mediaRecorder.start()}))}},{key:"stop",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(null==t.mediaRecorder)throw new Error("Recorder does not started");t.mediaRecorder.onstop=function(){try{var r=new Blob(t.chunks,{type:"audio/ogg; codecs=opus"});e(r)}catch(c){n(c)}},t.mediaRecorder.stop()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){if(null==this.analyser)throw new Error("Recorder does not started");var e=this.analyser.frequencyBinCount,t=new Uint8Array(e);return this.analyser.getByteTimeDomainData(t),t}},{key:"getBufferSize",value:function(){if(null==this.analyser)throw new Error("Recorder does not started");return this.analyser.frequencyBinCount}}]),e}(),h=n(24),b=n(142),f=n(143),O=n(56),x=n(144),v=n(151),m=n(140),p=n(145),y=n(141),k=n(150),w=n(72),C=n.n(w),g=n(149),R=n(131),S=n(132),D=n(133),A=n(146),E=n(135),F=n(136),T=n(36),B=n.n(T),I=n(67),P=n.n(I),L=n(5),U=function(e){var t=e.onCreatedFile,n=e.onCancelCreate,c=Object(r.useState)(""),a=Object(h.a)(c,2),i=a[0],o=a[1];return Object(L.jsxs)(g.a,{open:!0,children:[Object(L.jsx)(R.a,{children:"Create Audio"}),Object(L.jsxs)(S.a,{children:[Object(L.jsx)(D.a,{children:"Enter the title of the audio data."}),Object(L.jsx)(A.a,{autoFocus:!0,label:"Title",type:"text",fullWidth:!0,value:i,onChange:function(e){o(e.target.value)}})]}),Object(L.jsxs)(E.a,{children:[Object(L.jsx)(F.a,{onClick:n,color:"primary",startIcon:Object(L.jsx)(B.a,{}),children:"DROP"}),Object(L.jsx)(F.a,{disabled:0===i.length,startIcon:Object(L.jsx)(P.a,{}),onClick:function(){t(i)},color:"primary",children:"SAVE"})]})]})},W=function(e){var t=e.record,n=e.onDeleteFile,r=e.onCancelDelete;return Object(L.jsxs)(g.a,{open:!0,children:[Object(L.jsx)(R.a,{children:"Delete Audio"}),Object(L.jsx)(S.a,{children:Object(L.jsx)(D.a,{children:"Do you want to delete the file?"})}),Object(L.jsxs)(E.a,{children:[Object(L.jsx)(F.a,{onClick:r,color:"primary",children:"CANCEL"}),Object(L.jsx)(F.a,{startIcon:Object(L.jsx)(B.a,{}),onClick:function(){n(t)},color:"primary",children:"DELETE"})]})]})},q=n(137),z=n(138),M=n(139),N=n(69),G=n.n(N),J=function(e){var t=e.record,n=e.onDeleteClick,r=t.title,c=t.url;return Object(L.jsxs)(q.a,{children:[Object(L.jsx)(z.a,{children:Object(L.jsx)(O.a,{children:r})}),Object(L.jsxs)(M.a,{children:[Object(L.jsx)("audio",{src:c,controls:!0}),Object(L.jsx)(v.a,{title:"download",children:Object(L.jsx)(m.a,{"aria-label":"download",onClick:function(){var e=document.createElement("a");e.download="".concat(r,".ogg"),e.href=c,e.click()},children:Object(L.jsx)(G.a,{})})}),Object(L.jsx)(v.a,{title:"delete",children:Object(L.jsx)(m.a,{"aria-label":"delete",onClick:function(){n(t)},children:Object(L.jsx)(B.a,{})})})]})]})},V=n(147),_=n(70),H=n.n(_),K=n(71),Q=n.n(K),X=c.a.createContext(new j),Y=function(e){var t=e.onRecordedAudio,n=Object(r.useContext)(X),c=Object(r.useRef)(null),a=Object(r.useRef)(0),i=Object(r.useState)(!1),o=Object(h.a)(i,2),u=o[0],d=o[1],j=function e(){a.current=requestAnimationFrame(e),$(c.current,n)};return Object(r.useEffect)((function(){return Z(c.current),function(){cancelAnimationFrame(a.current)}}),[]),Object(L.jsxs)(V.a,{children:[Object(L.jsx)("canvas",{ref:c,style:{height:120,width:640}}),Object(L.jsx)(F.a,{variant:"contained",color:"secondary",disabled:u,startIcon:Object(L.jsx)(H.a,{}),onClick:Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,n.start();case 3:j();case 4:case"end":return e.stop()}}),e)}))),children:"Record"}),Object(L.jsx)(F.a,{variant:"contained",color:"primary",disabled:!u,startIcon:Object(L.jsx)(Q.a,{}),onClick:Object(s.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stop();case 2:r=e.sent,d(!1),cancelAnimationFrame(a.current),Z(c.current),void 0!==r&&t(r);case 7:case"end":return e.stop()}}),e)}))),children:"Stop"})]})},Z=function(e){if(null!=e){var t=e.width,n=e.height,r=e.getContext("2d");null!=r&&(r.fillStyle="#e0f7fa",r.fillRect(0,0,t,n),r.lineWidth=1,r.strokeStyle="#4caf50",r.beginPath(),r.moveTo(0,n/2),r.lineTo(t,n/2),r.stroke())}},$=function(e,t){if(null!=e){var n=e.width,r=e.height,c=e.getContext("2d");if(null!=c){c.fillStyle="#e0f7fa",c.fillRect(0,0,n,r),c.lineWidth=1,c.strokeStyle="#4caf50",c.beginPath();for(var a=t.getBufferSize(),i=1*n/a,o=t.getData(),l=0,s=0;s<a;s++){var u=o[s]/128*r/2;0===s?c.moveTo(l,u):c.lineTo(l,u),l+=i}c.lineTo(n,r/2),c.stroke()}}},ee=Object(y.a)((function(){return Object(k.a)({root:{flexGrow:1},title:{flexGrow:1}})})),te=function(){var e=ee(),t=Object(r.useState)([]),n=Object(h.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(null),o=Object(h.a)(i,2),l=o[0],s=o[1],u=Object(r.useState)(null),d=Object(h.a)(u,2),j=d[0],y=d[1];return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(b.a,{position:"static",children:Object(L.jsxs)(f.a,{children:[Object(L.jsx)(O.a,{variant:"h6",className:e.title,children:"Audi-O"}),Object(L.jsx)(x.a,{href:"https://github.com/ushiboy/audi-o",color:"inherit",target:"_blank",rel:"noopener",children:Object(L.jsx)(v.a,{title:"github",children:Object(L.jsx)(m.a,{edge:"end",color:"inherit",children:Object(L.jsx)(C.a,{})})})})]})}),Object(L.jsxs)(p.a,{maxWidth:"sm",children:[Object(L.jsx)(Y,{onRecordedAudio:function(e){var t=URL.createObjectURL(e);s({title:"",url:t})}}),c.map((function(e,t){return Object(L.jsx)(J,{record:e,onDeleteClick:function(e){y(e)}},t)}))]}),null!==l?Object(L.jsx)(U,{onCreatedFile:function(e){a((function(t){return t.concat([{title:e,url:l.url}])})),s(null)},onCancelCreate:function(){s(null)}}):null,null!==j?Object(L.jsx)(W,{record:j,onDeleteFile:function(e){a((function(t){return t.filter((function(t){var n=t.title,r=t.url;return!(n===e.title&&r===e.url)}))})),y(null)},onCancelDelete:function(){y(null)}}):null]})};n(100);i.a.render(Object(L.jsx)(X.Provider,{value:new j,children:Object(L.jsx)(te,{})}),document.getElementById("root"))}},[[101,1,2]]]);