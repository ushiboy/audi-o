(this["webpackJsonpaudi-o"]=this["webpackJsonpaudi-o"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),o=n(13),l=n.n(o),s=n(17),u=n(41),d=n(45),j=function(){function e(){Object(u.a)(this,e),this.chunks=void 0,this.mediaRecorder=void 0,this.analyser=void 0,this.chunks=[],this.mediaRecorder=null,this.analyser=null}return Object(d.a)(e,[{key:"start",value:function(){var e=this;return this.chunks=[],navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){var n=new AudioContext,a=n.createMediaStreamSource(t);e.analyser=n.createAnalyser(),e.analyser.fftSize=2048,a.connect(e.analyser),e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.ondataavailable=function(t){e.chunks.push(t.data)},e.mediaRecorder.start()}))}},{key:"stop",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(null==t.mediaRecorder)throw new Error("Recorder does not started");t.mediaRecorder.onstop=function(){try{var a=new Blob(t.chunks,{type:"audio/ogg; codecs=opus"});e(a)}catch(r){n(r)}},t.mediaRecorder.stop()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){if(null==this.analyser)throw new Error("Recorder does not started");var e=this.analyser.frequencyBinCount,t=new Uint8Array(e);return this.analyser.getByteTimeDomainData(t),t}},{key:"getBufferSize",value:function(){if(null==this.analyser)throw new Error("Recorder does not started");return this.analyser.frequencyBinCount}}]),e}(),b=n(76),h=n(75),f=(n(63).a,n(22)),O=n(145),x=n(146),v=n(58),y=n(148),p=n(155),m=n(144),k=n(149),C=n(147),w=n(154),g=n(74),R=n.n(g),S=n(153),D=n(135),A=n(136),E=n(137),F=n(150),T=n(139),B=n(140),P=n(37),I=n.n(P),L=n(68),U=n.n(L),W=n(5),q=function(e){var t=e.onCreatedFile,n=e.onCancelCreate,r=Object(a.useState)(""),c=Object(f.a)(r,2),i=c[0],o=c[1];return Object(W.jsxs)(S.a,{open:!0,children:[Object(W.jsx)(D.a,{children:"Create Audio"}),Object(W.jsxs)(A.a,{children:[Object(W.jsx)(E.a,{children:"Enter the title of the audio data."}),Object(W.jsx)(F.a,{autoFocus:!0,label:"Title",type:"text",fullWidth:!0,value:i,onChange:function(e){o(e.target.value)}})]}),Object(W.jsxs)(T.a,{children:[Object(W.jsx)(B.a,{onClick:n,color:"primary",startIcon:Object(W.jsx)(I.a,{}),children:"DROP"}),Object(W.jsx)(B.a,{disabled:0===i.length,startIcon:Object(W.jsx)(U.a,{}),onClick:function(){t(i)},color:"primary",children:"SAVE"})]})]})},z=function(e){var t=e.record,n=e.onDeleteFile,a=e.onCancelDelete;return Object(W.jsxs)(S.a,{open:!0,children:[Object(W.jsx)(D.a,{children:"Delete Audio"}),Object(W.jsx)(A.a,{children:Object(W.jsx)(E.a,{children:"Do you want to delete the file?"})}),Object(W.jsxs)(T.a,{children:[Object(W.jsx)(B.a,{onClick:a,color:"primary",children:"CANCEL"}),Object(W.jsx)(B.a,{startIcon:Object(W.jsx)(I.a,{}),onClick:function(){n(t)},color:"primary",children:"DELETE"})]})]})},M=n(141),N=n(142),G=n(143),J=n(71),V=n.n(J),_=n(70),H=n.n(_),K=function(e){var t=e.record,n=e.onPlayClick,a=e.onDeleteClick,r=t.title,c=t.data;return Object(W.jsxs)(M.a,{children:[Object(W.jsx)(N.a,{children:Object(W.jsx)(v.a,{children:r})}),Object(W.jsxs)(G.a,{children:[Object(W.jsx)(p.a,{title:"play",children:Object(W.jsx)(m.a,{"aria-label":"play",onClick:function(){n(t)},children:Object(W.jsx)(H.a,{})})}),Object(W.jsx)(p.a,{title:"download",children:Object(W.jsx)(m.a,{"aria-label":"download",onClick:function(){var e=document.createElement("a");e.download="".concat(r,".ogg");var t=URL.createObjectURL(c);e.href=t,e.click()},children:Object(W.jsx)(V.a,{})})}),Object(W.jsx)(p.a,{title:"delete",children:Object(W.jsx)(m.a,{"aria-label":"delete",onClick:function(){a(t)},children:Object(W.jsx)(I.a,{})})})]})]})},Q=n(151),X=n(72),Y=n.n(X),Z=n(73),$=n.n(Z),ee=r.a.createContext(new j),te=function(e){var t=e.onRecordedAudio,n=Object(a.useContext)(ee),r=Object(a.useRef)(null),c=Object(a.useRef)(0),i=Object(a.useState)(!1),o=Object(f.a)(i,2),u=o[0],d=o[1],j=function e(){c.current=requestAnimationFrame(e),ae(r.current,n)};return Object(a.useEffect)((function(){return ne(r.current),function(){cancelAnimationFrame(c.current)}}),[]),Object(W.jsxs)(Q.a,{children:[Object(W.jsx)("canvas",{ref:r,style:{height:120,width:640}}),Object(W.jsx)(B.a,{variant:"contained",color:"secondary",disabled:u,startIcon:Object(W.jsx)(Y.a,{}),onClick:Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,n.start();case 3:j();case 4:case"end":return e.stop()}}),e)}))),children:"Record"}),Object(W.jsx)(B.a,{variant:"contained",color:"primary",disabled:!u,startIcon:Object(W.jsx)($.a,{}),onClick:Object(s.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stop();case 2:a=e.sent,d(!1),cancelAnimationFrame(c.current),ne(r.current),void 0!==a&&t(a);case 7:case"end":return e.stop()}}),e)}))),children:"Stop"})]})},ne=function(e){if(null!=e){var t=e.width,n=e.height,a=e.getContext("2d");null!=a&&(a.fillStyle="#e0f7fa",a.fillRect(0,0,t,n),a.lineWidth=1,a.strokeStyle="#4caf50",a.beginPath(),a.moveTo(0,n/2),a.lineTo(t,n/2),a.stroke())}},ae=function(e,t){if(null!=e){var n=e.width,a=e.height,r=e.getContext("2d");if(null!=r){r.fillStyle="#e0f7fa",r.fillRect(0,0,n,a),r.lineWidth=1,r.strokeStyle="#4caf50",r.beginPath();for(var c=t.getBufferSize(),i=1*n/c,o=t.getData(),l=0,s=0;s<c;s++){var u=o[s]/128*a/2;0===s?r.moveTo(l,u):r.lineTo(l,u),l+=i}r.lineTo(n,a/2),r.stroke()}}},re=function(e){var t=e.audioRecord,n=Object(a.useRef)(null),r=t.title,c=t.data;return Object(a.useEffect)((function(){var e=n.current;if(null!==e)return e.src=URL.createObjectURL(c),e.play(),function(){e.pause()}}),[t]),Object(W.jsx)(O.a,{position:"fixed",style:{top:"auto",bottom:0},children:Object(W.jsxs)(x.a,{children:[Object(W.jsx)(v.a,{style:{marginRight:20},children:r}),Object(W.jsx)("audio",{ref:n,controls:!0})]})})},ce=Object(C.a)((function(){return Object(w.a)({root:{flexGrow:1},title:{flexGrow:1}})})),ie=function(){var e=ce(),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),o=Object(f.a)(i,2),l=o[0],s=o[1],u=Object(a.useState)(null),d=Object(f.a)(u,2),j=d[0],b=d[1],h=Object(a.useState)(null),C=Object(f.a)(h,2),w=C[0],g=C[1];return Object(W.jsxs)("div",{className:e.root,children:[Object(W.jsx)(O.a,{position:"static",children:Object(W.jsxs)(x.a,{children:[Object(W.jsx)(v.a,{variant:"h6",className:e.title,children:"Audi-O"}),Object(W.jsx)(y.a,{href:"https://github.com/ushiboy/audi-o",color:"inherit",target:"_blank",rel:"noopener",children:Object(W.jsx)(p.a,{title:"github",children:Object(W.jsx)(m.a,{edge:"end",color:"inherit",children:Object(W.jsx)(R.a,{})})})})]})}),Object(W.jsxs)(k.a,{maxWidth:"sm",children:[Object(W.jsx)(te,{onRecordedAudio:function(e){s({title:"",data:e})}}),r.map((function(e,t){return Object(W.jsx)(K,{record:e,onPlayClick:function(e){b(e)},onDeleteClick:function(e){g(e)}},t)}))]}),null!==l?Object(W.jsx)(q,{onCreatedFile:function(e){c((function(t){return t.concat([{title:e,data:l.data}])})),s(null)},onCancelCreate:function(){s(null)}}):null,null!==w?Object(W.jsx)(z,{record:w,onDeleteFile:function(e){c((function(t){return t.filter((function(t){var n=t.title,a=t.data;return!(n===e.title&&a===e.data)}))})),null!==j&&j.title===e.title&&j.data===e.data&&b(null),g(null)},onCancelDelete:function(){g(null)}}):null,null!==j?Object(W.jsx)(re,{audioRecord:j}):null]})};n(104);i.a.render(Object(W.jsx)(ee.Provider,{value:new j,children:Object(W.jsx)(ie,{})}),document.getElementById("root"))}},[[105,1,2]]]);